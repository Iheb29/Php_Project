;/*FB_PKG_DELIM*/

__d("LSFetchBackupsMetadata",["LSAppendDataTraceAddon","LSCreateDataTrace","LSCreateDataTraceID.nop","LSFlushDataTrace.nop","LSIsMobileClient","LSIssueNewTask","LSLogMebClientEvent.nop","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1];d.n;var e=[],f=[],g;return d.seq([function(f){return d.seq([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure] Beginning execution."),(c("gkx")("7350")||c("gkx")("4765"))&&c("justknobx")._("1101")?d.seq([function(c){return a[0]!==g?d.resolve(e[7]=a[0]):d.seq([function(a){return d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))&&d.i64.eq(a.backupTenancy,d.i64.cast([0,2]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?e[12]=!1:(a.item,e[12]=!0)})},function(a){return e[12]?e[14]=d.i64.or_(d.i64.cast([0,86]),d.i64.cast([0,128])):e[14]=d.i64.cast([0,86]),d.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,e[15]=a[0],a})},function(a){return e[19]="EncryptedBackups MCD Trace ID",e[20]=d.i64.to_string(e[14]),e[16]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",e[16],e[19],e[16],e[20]].join("")),d.resolve()},function(a){return d.sp(b("LSCreateDataTrace"),e[15],g,g,"backup_metadata",e[14])},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[17]=a[0],a})},function(a){return e[17]?e[18]=!0:e[18]=!1,e[18]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[21]=d.createArray(),g!==g?e[22]=(e[21].push(g),e[21]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[21],d.i64.cast([0,3]))):d.resolve()},function(a){return e[7]=e[15]}])},function(a){return e[7]!==g?d.sp(b("LSAppendDataTraceAddon"),e[7],d.i64.cast([0,1478]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[8]=a[0],a})},function(a){return e[8]?e[9]=!0:e[9]=!1,e[9]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[12]=d.createArray(),g!==g?e[13]=(e[12].push(g),e[12]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[12],d.i64.cast([0,3]))):d.resolve()},function(a){return d.fe(d.db.table(196).fetch(),function(a){return a["delete"]()})},function(a){return d.db.table(172).fetch([[[d.i64.cast([0,1])]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[10]=g:(b=a.item,e[10]=b.backupId)})},function(a){return d.i64.neq(e[10],g)?d.seq([function(a){return d.fe(d.ftr(d.db.table(196).fetch([[[e[10]]]]),function(a){return d.i64.eq(a.backupId,e[10])&&d.i64.lt(a.authorityLevel,d.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return d.db.table(196).add({backupId:e[10],authorityLevel:d.i64.cast([0,20]),backupSize:d.i64.cast([0,0]),creationTime:d.i64.cast([0,0]),lastSyncTime:d.i64.cast([0,0])})},function(a){return e[12]=new d.Map(),e[12].set("trace_id",e[7]),e[13]=d.toJSON(e[12]),d.sp(b("LSIssueNewTask"),"encrypted_backups_setup",d.i64.cast([0,50022]),e[13],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]),d.i64.cast([0,0]))}]):d.seq([function(a){return e[12]="Backup is not initialized",e[12]!==g?d.seq([function(a){return e[16]=["[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure] ","",e[12]].join(""),function(a){d.logger(a).mustfix(a)}(e[16]),e[13]=d.createArray(),e[7]!==g?e[17]=(e[13].push(e[7]),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupsMetadataStoredProcedure",e[12],e[13],d.i64.cast([0,3]))},function(a){return e[7]!==g?d.seq([function(a){return e[7]!==g?d.sp(b("LSAppendDataTraceAddon"),e[7],d.i64.cast([0,85]),d.i64.cast([0,2]),e[16],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[17]=a[0],a})},function(a){return e[17]?e[18]=!0:e[18]=!1,e[18]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[19]=d.createArray(),g!==g?e[20]=(e[19].push(g),e[19]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[19],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[7]!==g?d.nop(b("LSFlushDataTrace.nop"),e[7]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[14]=a[0],a})},function(a){return e[14]?e[15]=!0:e[15]=!1,e[15]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[17]=d.createArray(),g!==g?e[18]=(e[17].push(g),e[17]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[17],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(a){return e[7]!==g?d.seq([function(a){return e[7]!==g?d.sp(b("LSAppendDataTraceAddon"),e[7],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[15]=a[0],a})},function(a){return e[15]?e[16]=!0:e[16]=!1,e[16]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[17]=d.createArray(),g!==g?e[18]=(e[17].push(g),e[17]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[17],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[7]!==g?d.nop(b("LSFlushDataTrace.nop"),e[7]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[13]=a[0],a})},function(a){return e[13]?e[14]=!0:e[14]=!1,e[14]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[15]=d.createArray(),g!==g?e[16]=(e[15].push(g),e[15]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[15],d.i64.cast([0,3]))):d.resolve()}])},function(a){return d.fe(d.db.table(196).fetch(),function(a){return a["delete"]()})},function(a){return d.fe(d.ftr(d.db.table(196).fetch([[[d.i64.cast([-1,4294967295])]]]),function(a){return d.i64.eq(a.backupId,d.i64.cast([-1,4294967295]))&&d.i64.lt(a.authorityLevel,d.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(a){return d.db.table(196).add({backupId:d.i64.cast([-1,4294967295]),authorityLevel:d.i64.cast([0,80]),backupSize:d.i64.cast([-1,4294967295]),creationTime:d.i64.cast([-1,4294967295]),lastSyncTime:d.i64.cast([-1,4294967295])})}])}]):d.resolve(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure] is_backup_metadata_enabled is disabled"))},function(a){return e[1]=d.i64.of_float(Date.now()),e[2]=d.i64.random(),e[4]="Finishing execution. Execution time: ",e[5]=d.i64.to_string(d.i64.sub(e[1],e[0])),e[6]=" ms",e[3]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure] ",e[3],e[4],e[3],e[5],e[3],e[6]].join("")),d.i64.eq(d.i64.mod_(e[2],d.i64.cast([0,100])),d.i64.cast([0,0]))?(e[7]=",",e[8]=d.createArray(),g!==g?e[9]=(e[8].push(g),e[8]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupsMetadataStoredProcedure",[e[4],e[7],e[5],e[7],e[6]].join(""),e[8],d.i64.cast([0,4]))):d.resolve()}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSFetchBackupsMetadataStoredProcedure",["LSFetchBackupsMetadata"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b={});var d=[];d[0]=b.traceId;return c("LSFetchBackupsMetadata").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery$Parameters",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("useMWDropEBDbMenuDialog",["fbt","MAWEncryptedBackupsPersistedDB","asyncToGeneratorRuntime","promiseDone","setTimeout","useMWXConfirmationDialog"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){var a=c("useMWXConfirmationDialog")();function e(){return f.apply(this,arguments)}function f(){f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("MAWEncryptedBackupsPersistedDB").deleteEBIDB()});return f.apply(this,arguments)}return function(){return a({body:h._("__JHASH__DcM8TCyeV5W__JHASH__"),cancel:h._("__JHASH__m8lIvy2pF-q__JHASH__"),confirm:h._("__JHASH__pOCM-0rZl3___JHASH__"),title:h._("__JHASH__icqZlIIHBX0__JHASH__")},function(){c("promiseDone")(e().then(function(){c("setTimeout")(function(){window.location.reload()},500)}))})}}g["default"]=a}),98);
__d("MWDropEBDbMenu.react",["MWInboxSettingsMenuIcons","cr:5086","react","useMWDropEBDbMenuDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=c("useMWDropEBDbMenuDialog")();return b("cr:5086")!=null?i.jsx(b("cr:5086"),{icon:c("MWInboxSettingsMenuIcons").Terms,onClick:a,primaryText:"[Fb-only] Clear persisted EB DB"}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsFetchBackupMetadata",["LSFactory","LSFetchBackupsMetadataStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.runInTransaction(function(a){return c("LSFetchBackupsMetadataStoredProcedure")(c("LSFactory")(a))},"readwrite")}g.fetchBackupMetadata=a}),98);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXSpinner.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.isMessenger;return j.jsxs("div",{className:"x6s0dn4 x78zum5 xl56j7k x135pmgq xwib8y2",children:[j.jsx("div",{className:"x1sxyh0",children:j.jsx(c("MWXSpinner.react"),{color:a?"disabled":"blue",size:12})}),j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:h._("__JHASH__sqvt0agiqDI__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsSettingsDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsSettingsDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWChatEncryptedBackupsSettingsDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsSettingsDialog.react").__setRef("MWChatEncryptedBackupsSettingsDialog.entrypoint")};g["default"]=a}),98);
__d("MWXIconMenuItemSecureStorage",["MWXSvgIcon","SVGIcon","cr:5775","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:5775")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWChatSidebarEncryptedBackupsMenuItem.react",["fbt","MAWEncryptedBackupsStateManager","MWChatEncryptedBackupsSettingsDialog.entrypoint","MWJewelPopoverDialogContext.react","MWXIconMenuItemSecureStorage","MWXMenuItem.react","ReQL","ReQLSuspense","promiseDone","react","requireDeferred","useEncryptedBackupsProcessState","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useContext,m=c("requireDeferred")("MWEncryptedBackupsFetchBackupMetadata").__setRef("MWChatSidebarEncryptedBackupsMenuItem.react"),n=h._("__JHASH__Lde2nkz74OF__JHASH__");function a(){var a=c("useMWXEntryPointDialog")(c("MWChatEncryptedBackupsSettingsDialog.entrypoint"),{}),b=a[0];a=l(c("MWJewelPopoverDialogContext.react"));var e=a.setIsOpenForDialog,g=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("encrypted_backups"))},[g],f.id+":50");a=c("useEncryptedBackupsProcessState")({encryptedBackupData:a,storage:g});var j=a.backupState;a=function(){d("MAWEncryptedBackupsStateManager").eligibleForEBUX(j)&&m.onReady(function(a){a=a.fetchBackupMetadata;c("promiseDone")(a(g))}),e(!0),b({})};var o=j===-1||j===1;return k.jsx(c("MWXMenuItem.react"),{auxItem:{auxText:j===3?h._("__JHASH__zuHjNmdQ8AD__JHASH__"):h._("__JHASH__YsrKpzbN1OC__JHASH__"),type:"text"},disabled:o,icon:c("MWXIconMenuItemSecureStorage"),onClick:a,primaryText:n,role:"menuitemcheckbox",testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BoxLockOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),i.jsxs("defs",{children:[i.jsx("path",{d:"M0 932.5 162 932.5 162 0 0 0z"}),a.children]}),i.jsxs("g",{transform:"translate(-446 -398) translate(354 156)",stroke:"none",strokeWidth:1,fillRule:"evenodd",children:[i.jsx("mask",{children:i.jsx("use",{xlinkHref:"#a"})}),i.jsx("path",{d:"M109.355 257.5h-.855v-.409a1.59 1.59 0 0 0-1.5-1.582v-1.259a2.754 2.754 0 0 0-2.75-2.75 2.754 2.754 0 0 0-2.75 2.75v1.259a1.59 1.59 0 0 0-1.5 1.582v.409h-5.355c-.088 0-.145-.055-.145-.093V248.5h15v8.907c0 .038-.056.093-.145.093zm-3.855-2H103v-1.25a1.251 1.251 0 0 1 2.5 0v1.25zm1.5 4.909a.09.09 0 0 1-.091.091h-5.318a.09.09 0 0 1-.091-.091v-3.318c0-.05.04-.091.091-.091h5.318c.05 0 .091.04.091.091v3.318zM93.5 247h17v-2.5h-17v2.5zm17.275-4h-17.55c-.675 0-1.225.55-1.225 1.225v3.05c0 .598.432 1.096 1 1.202v8.93c0 .879.738 1.593 1.645 1.593H100v1.409c0 .877.714 1.591 1.591 1.591h5.318c.877 0 1.591-.714 1.591-1.591V259h.855c.907 0 1.645-.714 1.645-1.593v-8.93c.568-.106 1-.604 1-1.202v-3.05c0-.675-.55-1.225-1.225-1.225z",mask:"url(#b)"})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MarketplaceDistance",[],(function(a,b,c,d,e,f){"use strict";var g=1.60934;a=function(){function a(a,b){this.$1=a,this.$2=b}a.km=function(b){return new a(b,"km")};a.meters=function(b){return new a(b,"meters")};a.miles=function(b){return new a(b,"miles")};var b=a.prototype;b.toMiles=function(){switch(this.$2){case"km":return this.$1/g;case"meters":return this.$1/1e3/g;default:return this.$1}};b.toKm=function(){switch(this.$2){case"meters":return this.$1/1e3;case"miles":return this.$1*g;default:return this.$1}};b.toMeters=function(){switch(this.$2){case"km":return this.$1*1e3;case"miles":return this.$1*g*1e3;default:return this.$1}};return a}();f["default"]=a}),66);
__d("createCommitMutation_DEPRECATED",["Promise","cr:819055"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){return new(h||(h=b("Promise")))(function(e,f){return b("cr:819055").commitMutation(a,babelHelpers["extends"]({},d,{variables:{input:c},onCompleted:function(a,b){b&&b.length?f(b):e(a)},onError:function(a){return f([a])}}))})}function a(a,b){return function(c){return i(a,c,b)}}function c(a){return function(b,c){return i(b,c,a)}}function d(a,b){return function(c){return i(a,c,b(c))}}g.createCommitMutation_DEPRECATED=a;g.createCommitMutationForEnvironment_DEPRECATED=c;g.createCommitMutationWithVariables_DEPRECATED=d}),98);